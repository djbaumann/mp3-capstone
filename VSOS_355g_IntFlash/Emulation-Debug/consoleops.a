
//_____________________________________________________________
//
	.sect code,ConsoleIoctl	// 21 words
	.export _ConsoleIoctl
_ConsoleIoctl:
	ldx (I6)+1,NULL	// I6 += 1
	stx LR0,(I6)+1
	stx I6,(I6) ; sty I4,(I6)
	ldx (I6),I4
	ldx (I4)-2,NULL	// I4 += -2
// 	if (request == 1)
	ldx (I4)+2,A0	// unspill 'request' from #0
	add A0,ONES,A0	// 'request' != (-1) -> AT3
	nop
	jzc F0B1	// signed compare
	nop
// jumped away
	ldx (I4)-3,NULL ; ldy (I6)+1,NULL	// I4 += -3
// 	}
// {
//  vo_printf("\n\n-----< %s >-----\n",(char*)arg);
	ldx (I4)+3,A0	// unspill 'arg' from #0
	stx A0,(I6)+1	// 'arg'
	ldc String_1,A0	// ET1
	call _vo_printf
	stx A0,(I6)	// ET1
// jumped away
F0B1:
	ldx (I4),I6 ; ldy (I4),I4
	ldx (I6)-1,NULL	// I6 += -1
	ldx (I6)-1,LR0
	jr
	nop
// jumped away

//_____________________________________________________________
//
	.sect data_x,consoleopsconst_x	// 20 words
String_1:
	.word "\n\n-----< %s >-----\n"

	.zero 1

	.end
